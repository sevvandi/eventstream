<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Computes event-features — get_features • eventstream</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Computes event-features — get_features"><meta property="og:description" content="This function computes event features of 2D events."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eventstream</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Computes event-features</h1>
    
    <div class="hidden name"><code>get_features.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function computes event features of 2D events.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">get_features</span><span class="op">(</span>
  <span class="va">dat.xyz</span>,
  <span class="va">res.cluster</span>,
  <span class="va">normal.stats.splines</span>,
  win_size <span class="op">=</span> <span class="fl">200</span>,
  tt <span class="op">=</span> <span class="fl">10</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dat.xyz</dt>
<dd><p>The data in a cluster friendly format. The first two columns have <code>y</code> and <code>x</code> positions with the third column having the pixel value of that position.</p></dd>
<dt>res.cluster</dt>
<dd><p>Cluster details from <code>dbscan</code>.</p></dd>
<dt>normal.stats.splines</dt>
<dd><p>The background statistics, output from <code><a href="spline_stats.html">spline_stats</a></code>.</p></dd>
<dt>win_size</dt>
<dd><p>The window length of the moving window model, default is set to <code>200</code>.</p></dd>
<dt>tt</dt>
<dd><p>Related to event ages. For example if <code>tt=10</code> then the event ages are <code>10, 20, 30</code> and <code>40</code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An <code>Nx22x4</code> array  is returned for 2D data streams and an <code>Nx13x4</code> array for 3D data streams. Here <code>N</code> is the total number of  events extracted from all windows. The second dimension has <code>m</code> features and the class label for the <code>supervised</code> setting.  The third dimension has <code>4</code> different event ages : <code>tt, 2tt, 3tt, 4tt</code>.
For example, the element at <code>[10,6,3]</code> has the 6th feature, of the 10th extracted event when the age of the event is <code>3tt</code>. The features for 2D streams are listed below. For 3D streams the features <code>cluster_id, pixels, length, width, height, total_value, l2w_ratio, centroid_x, centroid_y, centroid_z, mean, std_dev</code> and <code>sd_from_global_mean</code> are computed.</p>
<dl><dt><code>cluster_id</code></dt>
<dd><p>An identification number for each event.</p></dd>
<dt><code>pixels</code></dt>
<dd><p>The number of pixels of each event.</p></dd>
<dt><code>length</code></dt>
<dd><p>The length of the event.</p></dd>
<dt><code>width</code></dt>
<dd><p>The width of the event.</p></dd>
<dt><code>total_value</code></dt>
<dd><p>The total value of the pixels.</p></dd>
<dt><code>l2w_ratio</code></dt>
<dd><p>Length to width ratio of event.</p></dd>
<dt><code>centroid_x</code></dt>
<dd><p>x coordinate of event centroid.</p></dd>
<dt><code>centroid_y</code></dt>
<dd><p>y coordinate of event centroid.</p></dd>
<dt><code>mean</code></dt>
<dd><p>Mean value of event pixels.</p></dd>
<dt><code>std_dev</code></dt>
<dd><p>Standard deviation of event pixels.</p></dd>
<dt><code>avg_slope</code></dt>
<dd><p>The slope of an <code>lm</code> object fitted to the event pixels.</p></dd>
<dt><code>quad_1</code></dt>
<dd><p>The linear coefficient of  a second order polynomial fitted to event pixels using <code>lm</code>.</p></dd>
<dt><code>quad_2</code></dt>
<dd><p>The quadratic coefficient of a second order polynomial fitted to event pixels using <code>lm</code>.</p></dd>
<dt><code>2sd_from_mean</code></dt>
<dd><p>The proportion of event pixels/cells that has values greater than 2 global standard deviations from the global mean of the window.</p></dd>
<dt><code>3sd_from_mean</code></dt>
<dd><p>The proportion of event pixels/cells that has values greater than 3 global standard deviations from the global mean of the window.</p></dd>
<dt><code>4sd_from_mean</code></dt>
<dd><p>The proportion of event pixels/cells that has values greater than 4 global standard deviations from the global mean of the window.</p></dd>
<dt><code>5iqr_from_median</code></dt>
<dd><p>A small portion of each window and its column medians and column IQRs are used to construct two smoothing splines: a median spline and an IQR spline. The value of the median smoothing spline at each event centroid is used as the local median for that event. Similarly, the value of the IQR smoothing spline at each event centroid is used as the local IQR for that event. This feature gives the proportion of event pixels/cells  that has values greater than 5 local IQRs from the local median.</p></dd>
<dt><code>6iqr_from_median</code></dt>
<dd><p>The proportion of event pixels/cells that has values greater than 6 local IQRs from the local median computed using splines.</p></dd>
<dt><code>7iqr_from_median</code></dt>
<dd><p>The proportion of event pixels/cells that has values greater than 7 local IQRs from the local median computed using splines.</p></dd>
<dt><code>8iqr_from_median</code></dt>
<dd><p>The proportion of event pixels/cells that has values greater than 8 local IQRs from the local median computed using splines.</p></dd>
<dt><code>iqr_from_median</code></dt>
<dd><p>Let us denote the 75th percentile of the event pixels value by <code>x</code>. How many local IQRs is <code>x</code> is away from the local median? Both local IQR and local median are computed using splines. That value is given by this feature.</p></dd>
<dt><code>sd_from_mean</code></dt>
<dd><p>Let us denote the 80th percentile of the event pixels value by <code>x</code>. How many global standard deviations is <code>x</code> is away from the global mean? Here both global values are computed from window data.</p></dd>
</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="gen_stream.html">gen_stream</a></span><span class="op">(</span><span class="fl">1</span>, sd<span class="op">=</span><span class="fl">15</span><span class="op">)</span></span>
<span class="r-in"><span class="va">zz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span class="r-in"><span class="va">clst</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_clusters.html">get_clusters</a></span><span class="op">(</span><span class="va">zz</span>, vis<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-plt img"><img src="get_features-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="va">sstats</span> <span class="op">&lt;-</span> <span class="fu"><a href="spline_stats.html">spline_stats</a></span><span class="op">(</span><span class="va">zz</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,<span class="op">]</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ftrs</span> <span class="op">&lt;-</span> <span class="fu">get_features</span><span class="op">(</span><span class="va">clst</span><span class="op">$</span><span class="va">data</span>, <span class="va">clst</span><span class="op">$</span><span class="va">clusters</span><span class="op">$</span><span class="va">cluster</span>, <span class="va">sstats</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sevvandi Kandanaarachchi.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

